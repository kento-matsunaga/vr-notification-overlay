# VRNotify プロジェクト進捗インデックス
# このファイルはプロジェクト全体の状態を追跡する
# 各セッションでの作業は sessions/ 配下に記録する

project:
  name: VRNotify
  status: development  # planning | development | testing | release
  current_phase: pre-mvp  # pre-mvp | mvp-phase1 | mvp-phase2 | mvp-phase3
  created_at: "2026-02-16"
  last_updated: "2026-02-17"
  architecture_pivot: "2026-02-17: Discord Bot/Slack → Windows通知リスナー方式に変更"

# 完了したマイルストーン
completed_milestones:
  - id: M001
    name: "競合調査・実現性調査"
    completed_at: "2026-02-16"
    summary: "XSOverlay, OVR Toolkit, Desktop+, VRCX等の競合分析完了。技術的実現可能性を確認。"

  - id: M002
    name: "BDDシナリオ作成・要件定義"
    completed_at: "2026-02-16"
    summary: "3視点(UX/ドメイン/技術)からBDDシナリオ約115件作成。ドメインモデル・用語集確立。"

  - id: M003
    name: "技術・ビジネス決定事項確定"
    completed_at: "2026-02-16"
    summary: "技術スタック、MVPスコープ、Discord連携方式、配布形態等の主要決定完了。"

  - id: M004
    name: "アーキテクチャ設計"
    completed_at: "2026-02-16"
    summary: "Clean Architecture 6層構成(Domain/Application/Infrastructure/Overlay/Host/Desktop) + 3テストプロジェクト。docs/architecture.md作成、全プロジェクトビルド成功。"

# 次のマイルストーン（未着手）
next_milestones:
  - id: M004.5
    name: "ドメイン層テストカバレッジ"
    status: completed
    completed_at: "2026-02-16"
    description: "83テスト作成・全PASS。NotificationCard/UserSettings/Profile等の主要ドメインオブジェクト検証。"

  - id: M005
    name: "OpenVRオーバーレイ プロトタイプ"
    status: completed
    completed_at: "2026-02-16"
    description: "OVRSharp + SkiaSharpでハードコード通知カードをSteamVRオーバーレイとしてVR内に表示。HMD追従、テキスト描画、PNG経由テクスチャロードで動作確認済み。"

  - id: M006
    name: "Windows通知リスナー プロトタイプ"
    status: pending
    description: |
      UserNotificationListenerで全アプリの通知をキャプチャしコンソール表示。
      Sparse MSIX Package作成、通知アクセス許可、アプリ名・タイトル・本文取得。
      [旧M006 Discord Bot + 旧M007 Slack Socket Modeを統合・方式変更]

  - id: M007
    name: "統合プロトタイプ"
    status: pending
    description: |
      Windows通知キャプチャ → Channel<NotificationCard> → VRオーバーレイ表示の一気通貫。
      BackgroundService構成、MediatRパイプライン、DisplaySlotManager。

  - id: M008
    name: "アプリ選択フィルタ・設定永続化"
    status: pending
    description: |
      アプリ一覧の自動検出、表示対象アプリの選択UI、
      FilterChain実装、JsonSettingsRepository、設定の永続化。

  - id: M009
    name: "MVP実装"
    status: pending
    description: |
      DND、通知履歴(SQLite)、表示スロット管理(プリエンプション)、
      デスクトップUI(トレイ常駐、設定画面)、テスト拡充。

# 未解決の課題・検討事項
open_questions:
  - id: Q001
    question: "通知のデフォルト表示位置（HMD上部/下部/手首）"
    status: deferred
    note: "全方式実装後にテストして決定"

  - id: Q002
    question: "Steam販売時のDiscord Privileged Intent申請"
    status: resolved
    note: "Windows通知リスナー方式に変更のため不要"

  - id: Q003
    question: "通知履歴にメッセージ本文をどこまで保存するか"
    status: resolved
    note: "Windows通知の内容をそのまま表示するため、外部APIポリシーとの整合性問題なし"

  - id: Q004
    question: "Sparse MSIX Packageの署名方法（開発時は自己署名、配布時は？）"
    status: open
    note: "M006実装時に調査・決定"

  - id: Q005
    question: "Win32アプリ（非MSIX）のAppInfo取得失敗時のフォールバック"
    status: open
    note: "DisplayNameでフォールバック、try-catchで保護"

# セッション一覧
sessions:
  - file: "sessions/2026-02-16_initial-planning.yaml"
    date: "2026-02-16"
    summary: "初回セッション。競合調査→BDD作成→決定事項確定"
  - file: "sessions/2026-02-16_architecture-design.yaml"
    date: "2026-02-16"
    summary: "M004完了。アーキテクチャ設計、.slnスキャフォールド、全ドメイン/Application/Infrastructure/Overlay/Host層の実装"
  - file: "sessions/2026-02-16_domain-tests.yaml"
    date: "2026-02-16"
    summary: "ドメイン層ユニットテスト83件作成・全PASS"
  - file: "sessions/2026-02-16_m005-overlay-prototype.yaml"
    date: "2026-02-16"
    summary: "M005完了。OpenVRオーバーレイプロトタイプ実装、SteamVR上で動作確認"
  - file: "sessions/2026-02-17_architecture-pivot.yaml"
    date: "2026-02-17"
    summary: "アーキテクチャピボット。Discord Bot/Slack → Windows通知リスナー方式に変更。マイルストーン再策定。"
